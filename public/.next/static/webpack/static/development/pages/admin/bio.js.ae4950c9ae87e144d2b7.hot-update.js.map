{"version":3,"file":"static/webpack/static/development/pages/admin/bio.js.ae4950c9ae87e144d2b7.hot-update.js","sources":["webpack:///./pages/admin/bio.js"],"sourcesContent":["import React from 'react';\nimport Router from 'next/router'\nimport \"../../src/styles/main.scss\";\nimport withAuth from  '../../src/hocs/withAuth';\n\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\n\nimport BioService from '../../src/services/BioService';\nconst bio = new BioService();\n\nimport Logo from '../../src/components/logo';\nimport Footer from '../../src/components/footer';\n\nclass AdminBio extends React.Component {\n    constructor() {\n        super();\n        \n        this.onEditorStateChange = this.onEditorStateChange.bind(this);\n        this.onEditorStateChangePt = this.onEditorStateChangePt.bind(this);\n        this.save = this.save.bind(this);\n        this.state = {\n            title: 'Bio',\n            title_pt: 'Bio',\n            description: '',\n            description_pt: '',\n            editorState: '',\n            editorStatePt: ''\n        }\n    }\n\n    componentDidMount() {\n        bio.getBio().then(res =>  {\n            const html = res.description;\n            const htmlPt = res.description_pt;\n            const contentBlock = htmlToDraft(html);\n            const contentBlockPt = htmlToDraft(htmlPt);\n            if (contentBlock) {\n                const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n                const editorState = EditorState.createWithContent(contentState);\n                const contentStatePt = ContentState.createFromBlockArray(contentBlockPt.contentBlocks);\n                const editorStatePt = EditorState.createWithContent(contentStatePt);\n                this.setState ({\n                    editorState,\n                    editorStatePt\n                });\n            }\n        });\n    }\n\n    onEditorStateChange (editorState) {\n        const html = draftToHtml(convertToRaw(editorState.getCurrentContent()))\n        this.setState({\n          editorState,\n          description: html\n        });\n        console.log(this.state.description);\n    };\n\n    onEditorStateChangePt (editorStatePt) {\n        const html = draftToHtml(convertToRaw(editorStatePt.getCurrentContent()))\n        this.setState({\n          editorStatePt,\n          description_pt: html\n        });\n        console.log(this.state.description_pt);\n    };\n\n    save() {\n\n        const {title, title_pt, description, description_pt} = this.state;\n        const data = {\n            title, title_pt, description, description_pt\n        }\n\n        bio.saveBio(data).then(res =>  {\n            console.log(res);\n        });\n    }\n\n    render () {\n        const { editorState, editorStatePt } = this.state;\n        return (\n            <section className=\"admin\">\n                <header className=\"header\">\n                    <div className=\"arrow-back action\" onClick={() => Router.push(`/admin`)}>\n                        <i className=\"fas fa-arrow-left icon\"></i>\n                        <small className=\"text\">Back</small>\n                    </div>\n                    <Logo />\n                </header>\n                <main className=\"main\">\n                    <div className=\"editor\">\n                        <h3 className=\"title\">Content (En)</h3>\n                        <Editor\n                            editorState={editorState}\n                            toolbarClassName=\"toolbarClassName\"\n                            wrapperClassName=\"wrapperClassName\"\n                            editorClassName=\"editorClassName\"\n                            onEditorStateChange={this.onEditorStateChange}\n                            toolbar={{\n                                options: ['inline', 'fontSize', 'list', 'textAlign', 'colorPicker', 'link', 'history'],\n                            }}\n                        />\n                    </div>\n                    <div className=\"editor\">\n                        <h3 className=\"title\">Cont√©udo (Pt)</h3>\n                        <Editor\n                            editorState={editorStatePt}\n                            toolbarClassName=\"toolbarClassName\"\n                            wrapperClassName=\"wrapperClassName\"\n                            editorClassName=\"editorClassName\"\n                            onEditorStateChange={this.onEditorStateChangePt}\n                            toolbar={{\n                                options: ['inline', 'fontSize', 'list', 'textAlign', 'colorPicker', 'link', 'history'],\n                            }}\n                        />\n                    </div>\n                    <button className='button -center' onClick={this.save}>Save</button>\n                </main>\n                <Footer />\n            </section>\n        );\n    }\n}\n\nexport default withAuth(AdminBio);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AANA;AAcA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AADA;AAIA;AACA;AACA;AACA;;;AAEA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AA7GA;AACA;AA+GA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}