{"version":3,"file":"static/webpack/static/development/pages/admin/video.js.98403936c072217064cc.hot-update.js","sources":["webpack:///./pages/admin/video.js"],"sourcesContent":["import React from 'react';\nimport Router from 'next/router'\nimport \"../../src/styles/main.scss\";\nimport withAuth from  '../../src/hocs/withAuth';\n\nimport Vimeo from '@u-wave/react-vimeo';\n\nimport CategoriesService from '../../src/services/Categories';\nconst categories = new CategoriesService();\n\nimport Logo from '../../src/components/logo';\nimport Footer from '../../src/components/footer';\n\nimport FormErrors from '../../src/utils/FormErrors';\n\nclass AdminVideo extends React.Component {\n    constructor() {\n        super();\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.state = {\n            filmId: Router.query.idFilm,\n            category: \"\",\n            titleFilm: \"\",\n            category_id: \"\",\n            videos: [],\n            film: {},\n            title: \"\",\n            title_pt: \"\",\n            vimed_id: \"\",\n            titleValid: false,\n            titlePtValid: false,\n            vimeoValid: false,\n            formErrors: {title: '', titulo: '', vimeo: ''}\n        }\n    }\n\n\n    handleInput (e) {\n        const name = e.target.name;\n        const value = e.target.value;\n        this.setState({[name]: value}, \n            () => { this.validateField(name, value) });\n    }\n\n    componentDidMount() {\n        categories.getFilmById(Router.query.idFilm).then(res =>  {\n            this.setState({\n                film: res, \n                category: res.category.name,\n                category_id: res.category_id,\n                titleFilm: res.title,\n                videos: res.videos\n            });\n        })\n    }\n\n    validateField(fieldName, value) {\n        let fieldValidationErrors = this.state.formErrors;\n        let titleValid = this.state.titleValid;\n        let titlePtValid = this.state.titlePtValid;\n        let vimeoValid = this.state.vimeoValid;\n      \n        switch(fieldName) {\n          case 'title':\n            titleValid = value.length >= 3;\n            fieldValidationErrors.title = titleValid ? '' : ' is too short';\n            break;\n          case 'title_pt':\n            titlePtValid = value.length >= 3;\n            fieldValidationErrors.titulo = titlePtValid ? '': ' é muito curto';\n            break;\n          case 'vimeo_id':\n            vimeoValid = value.length >= 5;\n            fieldValidationErrors.vimeo = vimeoValid ? '': ': id error';\n            break;\n          default:\n            break;\n        }\n        this.setState({\n            formErrors: \n                fieldValidationErrors,\n                titleValid,\n                titlePtValid,\n                vimeoValid\n        }, this.validateForm);\n    }\n\n    validateForm() {\n        this.setState({formValid: this.state.titleValid && this.state.titlePtValid && this.state.vimeoValid});\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n        const { \n            title, \n            title_pt, \n            vimeo_id,\n            filmId\n        } = this.state;\n\n        const data = {\n            title, \n            title_pt, \n            vimeo_id,\n            film_id: filmId\n        }\n\n        categories.saveVideo(data).then(res => {\n            this.setState({\n                videos: [...this.state.videos, res.data]\n            })\n        })\n    }\n\n    deleteVideo(videoId, index) {\n        \n    }\n\n    done() {\n        Router.push(`/admin`)\n    }\n\n    render () {\n        const { filmId, category, category_id, titleFilm, videos } = this.state;\n        return (\n            <section className=\"admin\">\n                <header className=\"header\">\n                    <div className=\"arrow-back action\" onClick={() => Router.push(`/admin/${category_id}/${category}/film/${filmId}`)}>\n                        <i className=\"fas fa-arrow-left icon\"></i>\n                        <small className=\"text\">Back</small>\n                    </div>\n                    <Logo />\n                </header>\n                <main className=\"main\">\n                    <h2 className=\"title\">{category} > <strong>{titleFilm}</strong></h2>\n                    <form className=\"form -grid -video\" onSubmit={this.handleSubmit}>\n                        <div className=\"col -four\">\n                            <small>English</small>\n                            <input type=\"text\" id=\"title\" name=\"title\" className=\"input\" \n                                value={this.state.title} placeholder=\"Title*\" onChange={(event) => this.handleInput(event)} />\n                        </div>\n                        <div className=\"col -four\">\n                            <small>Portuguese</small>\n                            <input type=\"text\" id=\"titulo\" name=\"title_pt\" className=\"input\" \n                                value={this.state.title_pt} placeholder=\"Título*\" onChange={(event) => this.handleInput(event)} />\n                        </div>\n                        <div className=\"col -four\">\n                            <small>Vimeo Code</small>\n                            <input type=\"number\" id=\"vimeo\" name=\"vimeo_id\" className=\"input\" \n                                value={this.state.vimeo_id} placeholder=\"VimeoID*\" onChange={(event) => this.handleInput(event)} />\n                        </div>\n                        <div className=\"col -four\">\n                            <button className={`button -right ${!this.state.formValid ? '-disabled' : ''}`} disabled={!this.state.formValid} >Add Video</button>\n                        </div>\n                    </form>\n                    <FormErrors formErrors={this.state.formErrors} />\n                    <div className=\"videos\">\n                        <h3>Videos</h3>\n                        <section className=\"list\">\n                            { \n                                videos.length === 0 \n                                ? 'No video registered' \n                                : \n                                videos.map((video, index) => (\n                                    <article className=\"player\" key={video.id}>\n                                        <Vimeo\n                                            video={video.vimeo_id}\n                                            width={480}\n                                            showByline={false}\n                                            showTitle={false}\n                                            showPortrait={false}\n                                        />\n                                        <button className=\"button\" onClick={() => this.deleteVideo(video.id, index)}>Excluir vídeo</button>\n                                    </article>\n                                ))\n                            }\n                            \n                        </section>\n                    </div>\n                </main>\n                <Footer />\n            </section>\n        );\n    }\n}\n\nexport default withAuth(AdminVideo);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAbA;AAHA;AAkBA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAdA;AACA;AAeA;AACA;AAEA;AACA;AACA;AALA;AAOA;;;AAEA;AACA;AAAA;AAAA;AACA;;;AAEA;AAAA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AADA;AAGA;AACA;;;AAEA;;;AAIA;AACA;AACA;;;AAEA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AATA;AAiBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AAxKA;AACA;AA0KA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}